<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>模块化传感器平台</title>
    <link rel="stylesheet" href="scss/styles.scss">
    <script type="module" src="js/nfc.js"></script>
</head>

<body>
    <div id="errorMsg" class="alert alert-danger d-none" role="alert"></div>
    <div id="statusMsg" class="alert alert-primary d-none" role="alert"></div>

    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        <div class="mx-auto order-0">
            <a class="navbar-brand mx-auto" href="#">NFC读写卡器</a>
        </div>
    </nav>

    <div id="config" class="container-sm my-2">
        <select id="mfrc522PinSelect" class="form-select my-2">
            <option selected value="-1">请选择NFC模块和平台的连接引脚</option>
            <option value="0">0</option>
            <option value="4">4</option>
            <option value="8">8</option>
            <option value="12">12</option>
            <option value="16">16</option>
        </select>
    </div>

    <div id="pinCard" class="card d-none" style="width: 18rem; margin: 0 auto;">
        <div class="card-body">
          <h5 class="card-title">MFRC522 NFC模块连接引脚</h5>
          <h6 id="moduleConnectionInfo" class="card-subtitle mb-2 text-muted"></h6>
        </div>
    </div>
    <hr>

    <div id="getUIDSection" class="container-sm border-bottom my-2 text-center">
        <div class="display-6  my-1">获得NFC卡ID</div>
        <p>点击获得NFC卡ID按钮，然后将NFC发在NFC模块上面。</p>
        <p>当NFC模块收到ID后，会将ID显示在该页面上。</p>
        <div id="getUIDCard" class="card d-none" style="width: 18rem; margin: 0 auto;">
            <div class="card-body">
              <h5 class="card-title">检测到NFC卡</h5>
              <h6 id="nfcCardUid" class="card-subtitle mb-2 text-muted"></h6>
              <h6 id="nfcCardType" class="card-subtitle mb-2 text-muted"></h6>
            </div>
        </div>
        <div class="my-4 d-flex justify-content-center">
            <button id="getUidBtn" class="btn btn-primary mx-3">获得NFC卡ID</button>
        </div>
    </div>

    <div id="readCardSection" class="container-sm border-bottom my-2 text-center">
        <form>
            <div class="form-group w-50 mx-auto">
                <label for="readStartBlock">NFC卡开始读取的block地址</label>
                <input type="number" class="form-control" id="readStartBlock" placeholder="0" value="0">
                <label for="blockNumbers">读取的block的数量</label>
                <input type="number" class="form-control" id="blockNumbers" placeholder="0" value="1">
                <label for="readDataDecodeType">数据解析方式</label>
                <select class="form-control" id="readDataDecodeType">
                    <option value="0">无解析</option>
                    <option value="1">ASCII</option>
                    <option value="2">UTF-16</option>
                </select>
            </div>
            <table class="table">
                <thead>
                  <tr>
                    <th scope="col">Block地址</th>
                    <th scope="col">二进制数据</th>
                    <th scope="col">utf-8/16数据</th>
                  </tr>
                </thead>
                <tbody id="cardReadData">
                </tbody>
              </table>
        </form>
        <div>

        </div>
        <div class="my-4 d-flex justify-content-center">
            <button id="readCardBtn" class="btn btn-primary mx-3">读取NFC卡</button>
        </div>
    </div>

    <div id="writeCardSection" class="container-sm border-bottom my-2 text-center">
        <div class="form-group w-50 mx-auto">
            <label for="writeStartBlock">NFC卡写入数据的起始block地址</label>
            <input type="number" class="form-control" id="writeStartBlock" placeholder="0" value="1">
            <label for="blockNumbers">写入数据的格式，选择字符串或二进制</label>
            <select class="form-control my-4" id="writeDataFormat">
                <option value="0">字符串</option>
                <option value="1">二进制</option>
            </select>
            <label for="blockNumbers">写入数据</label>
            <textarea class="form-control" id="writeDataArea" rows="3"></textarea>
        </div>
        <div class="my-4 d-flex justify-content-center">
            <button id="writeCardBtn" class="btn btn-primary mx-3">写数据到NFC卡</button>
        </div>
    </div>

    <template id="readNfcDataTemplate">
        <tr>
            <th scope="row">1</th>
            <td></td>
            <td></td>
        </tr>
    </template>
</body>

